<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 320" width="900" height="320">
  <defs>
    <!-- nf-core green gradient -->
    <linearGradient id="nfcore-green" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#0c542a"/>
      <stop offset="50%" stop-color="#1a7a3e"/>
      <stop offset="100%" stop-color="#25af64"/>
    </linearGradient>
    <!-- QC blue gradient -->
    <linearGradient id="qc-blue" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#1565C0"/>
      <stop offset="100%" stop-color="#42A5F5"/>
    </linearGradient>
    <!-- Orange gradient for RNA QC -->
    <linearGradient id="rna-orange" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#E65100"/>
      <stop offset="100%" stop-color="#FF9800"/>
    </linearGradient>
    <!-- Cyan gradient for analysis -->
    <linearGradient id="analysis-cyan" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#006064"/>
      <stop offset="100%" stop-color="#00ACC1"/>
    </linearGradient>
    <!-- Gray gradient for reports -->
    <linearGradient id="report-gray" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#37474F"/>
      <stop offset="100%" stop-color="#78909C"/>
    </linearGradient>
    <style>
      .title { font: bold 18px 'Maven Pro', 'Helvetica Neue', Arial, sans-serif; fill: #333; }
      .station-name { font: bold 11px 'Maven Pro', 'Helvetica Neue', Arial, sans-serif; fill: #333; }
      .station-desc { font: 9px 'Maven Pro', 'Helvetica Neue', Arial, sans-serif; fill: #666; }
      .category { font: bold 10px 'Maven Pro', 'Helvetica Neue', Arial, sans-serif; text-transform: uppercase; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="900" height="320" fill="#fafafa"/>

  <!-- Title -->
  <text x="450" y="28" class="title" text-anchor="middle">nf-core/hmfrnaseq</text>

  <!-- ========== MAIN GREEN LINE (Alignment Pipeline) ========== -->
  <!-- Input to STAR -->
  <line x1="60" y1="100" x2="160" y2="100" stroke="url(#nfcore-green)" stroke-width="10" stroke-linecap="round"/>
  <!-- STAR to Sort -->
  <line x1="160" y1="100" x2="280" y2="100" stroke="url(#nfcore-green)" stroke-width="10" stroke-linecap="round"/>
  <!-- Sort to Merge -->
  <line x1="280" y1="100" x2="400" y2="100" stroke="url(#nfcore-green)" stroke-width="10" stroke-linecap="round"/>
  <!-- Merge to MarkDup -->
  <line x1="400" y1="100" x2="520" y2="100" stroke="url(#nfcore-green)" stroke-width="10" stroke-linecap="round"/>
  <!-- MarkDup continues to gate -->
  <path d="M 520 100 Q 580 100 600 140 L 600 200" stroke="url(#nfcore-green)" stroke-width="10" fill="none" stroke-linecap="round"/>
  <!-- Gate to Isofox -->
  <line x1="600" y1="200" x2="600" y2="260" stroke="url(#analysis-cyan)" stroke-width="10" stroke-linecap="round"/>
  <!-- Isofox to end -->
  <line x1="600" y1="260" x2="700" y2="260" stroke="url(#analysis-cyan)" stroke-width="10" stroke-linecap="round"/>

  <!-- ========== QC BRANCH (FastQC) ========== -->
  <path d="M 60 100 Q 60 60 100 60 L 180 60" stroke="url(#qc-blue)" stroke-width="8" fill="none" stroke-linecap="round"/>

  <!-- ========== RNA QC BRANCH ========== -->
  <!-- From MarkDup down to RNA QC -->
  <path d="M 520 100 Q 520 140 560 160 L 720 160" stroke="url(#rna-orange)" stroke-width="8" fill="none" stroke-linecap="round"/>
  <!-- RNA QC stations connection -->
  <line x1="720" y1="160" x2="840" y2="160" stroke="url(#rna-orange)" stroke-width="8" stroke-linecap="round"/>

  <!-- ========== MULTIQC COLLECTION LINES ========== -->
  <!-- From FastQC to MultiQC -->
  <path d="M 180 60 Q 220 60 240 80 Q 280 120 320 160 Q 380 220 780 260" stroke="url(#report-gray)" stroke-width="4" fill="none" stroke-linecap="round" stroke-dasharray="6,4" opacity="0.6"/>
  <!-- From RNA QC to MultiQC -->
  <path d="M 780 160 Q 800 160 820 200 Q 830 230 820 260 L 780 260" stroke="url(#report-gray)" stroke-width="4" fill="none" stroke-linecap="round" stroke-dasharray="6,4" opacity="0.6"/>
  <!-- From MarkDup to MultiQC -->
  <path d="M 520 100 Q 560 140 620 180 Q 700 230 780 260" stroke="url(#report-gray)" stroke-width="4" fill="none" stroke-linecap="round" stroke-dasharray="6,4" opacity="0.6"/>

  <!-- ========== STATIONS ========== -->

  <!-- INPUT Station -->
  <g transform="translate(60, 100)">
    <circle cx="0" cy="0" r="14" fill="#25af64" stroke="white" stroke-width="4"/>
    <circle cx="0" cy="0" r="6" fill="white"/>
    <text x="0" y="-24" class="station-name" text-anchor="middle">Input</text>
    <text x="0" y="-12" class="station-desc" text-anchor="middle">FASTQ / BAM</text>
  </g>

  <!-- FastQC Station -->
  <g transform="translate(180, 60)">
    <circle cx="0" cy="0" r="12" fill="#42A5F5" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="5" fill="white"/>
    <text x="0" y="-20" class="station-name" text-anchor="middle">FastQC</text>
  </g>

  <!-- STAR Station -->
  <g transform="translate(160, 100)">
    <circle cx="0" cy="0" r="12" fill="#1a7a3e" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="5" fill="white"/>
    <text x="0" y="28" class="station-name" text-anchor="middle">STAR</text>
    <text x="0" y="40" class="station-desc" text-anchor="middle">Alignment</text>
  </g>

  <!-- SAMtools Sort Station -->
  <g transform="translate(280, 100)">
    <circle cx="0" cy="0" r="12" fill="#1a7a3e" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="5" fill="white"/>
    <text x="0" y="28" class="station-name" text-anchor="middle">SAMtools</text>
    <text x="0" y="40" class="station-desc" text-anchor="middle">Sort</text>
  </g>

  <!-- Sambamba Merge Station -->
  <g transform="translate(400, 100)">
    <circle cx="0" cy="0" r="12" fill="#1a7a3e" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="5" fill="white"/>
    <text x="0" y="28" class="station-name" text-anchor="middle">Sambamba</text>
    <text x="0" y="40" class="station-desc" text-anchor="middle">Merge</text>
  </g>

  <!-- MarkDuplicates Station -->
  <g transform="translate(520, 100)">
    <circle cx="0" cy="0" r="14" fill="#25af64" stroke="white" stroke-width="4"/>
    <circle cx="0" cy="0" r="6" fill="white"/>
    <text x="0" y="28" class="station-name" text-anchor="middle">MarkDuplicates</text>
    <text x="0" y="40" class="station-desc" text-anchor="middle">GATK</text>
  </g>

  <!-- bam_stat Station -->
  <g transform="translate(720, 160)">
    <circle cx="0" cy="0" r="10" fill="#FF9800" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="4" fill="white"/>
    <text x="0" y="-18" class="station-name" text-anchor="middle">bam_stat</text>
  </g>

  <!-- read_duplication Station -->
  <g transform="translate(780, 160)">
    <circle cx="0" cy="0" r="10" fill="#FF9800" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="4" fill="white"/>
    <text x="0" y="-18" class="station-name" text-anchor="middle">read_dup</text>
  </g>

  <!-- split_bam Station -->
  <g transform="translate(840, 160)">
    <circle cx="0" cy="0" r="10" fill="#FF9800" stroke="white" stroke-width="3"/>
    <circle cx="0" cy="0" r="4" fill="white"/>
    <text x="0" y="-18" class="station-name" text-anchor="middle">split_bam</text>
    <text x="0" y="-6" class="station-desc" text-anchor="middle">(rRNA)</text>
  </g>

  <!-- rRNA QC Gate Station (diamond) -->
  <g transform="translate(600, 200)">
    <rect x="-12" y="-12" width="24" height="24" rx="3" fill="#F44336" stroke="white" stroke-width="3" transform="rotate(45)"/>
    <text x="-50" y="5" class="station-name" text-anchor="end">rRNA Gate</text>
  </g>

  <!-- Isofox Station -->
  <g transform="translate(600, 260)">
    <circle cx="0" cy="0" r="14" fill="#00ACC1" stroke="white" stroke-width="4"/>
    <circle cx="0" cy="0" r="6" fill="white"/>
    <text x="0" y="28" class="station-name" text-anchor="middle">Isofox</text>
    <text x="0" y="40" class="station-desc" text-anchor="middle">Quantification</text>
  </g>

  <!-- MultiQC Station -->
  <g transform="translate(780, 260)">
    <circle cx="0" cy="0" r="16" fill="#78909C" stroke="white" stroke-width="4"/>
    <circle cx="0" cy="0" r="7" fill="white"/>
    <text x="0" y="30" class="station-name" text-anchor="middle">MultiQC</text>
    <text x="0" y="42" class="station-desc" text-anchor="middle">Reports</text>
  </g>

  <!-- ========== CATEGORY LABELS ========== -->
  <text x="110" y="135" class="category" fill="#25af64">ALIGNMENT</text>
  <text x="780" y="135" class="category" fill="#FF9800" text-anchor="middle">RNA QC (RSeQC)</text>
  <text x="180" y="48" class="category" fill="#42A5F5" text-anchor="middle">QC</text>
  <text x="690" y="295" class="category" fill="#00ACC1" text-anchor="middle">ANALYSIS</text>

  <!-- Pass/Fail labels -->
  <text x="615" y="235" class="station-desc" fill="#4CAF50">Pass</text>
  <text x="640" y="195" class="station-desc" fill="#F44336">Fail â†’ Skip</text>

</svg>